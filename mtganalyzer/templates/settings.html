<html>
  <head>
    <title>Mtganalyzer - {{ pagename }}</title>
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  </head>
<body>

<table class="header">
  <tr>
    <td><a href="/">Home</a></td>
    <td><a href="matchhistory">Match history</a></td>
    <td><a href="decks">Deck stats</a></td>
    <td><a href="opponents">Opponents stats</a></td>
    <td><a href="settings">Settings</a></td>
    <td><a href="about">About Mtganalyzer</a></td>
  </tr>
</table>
<br/>
<br/>

<div class="settingsResponse">
{% autoescape false %}
    {{ pagecontent }}
{% endautoescape %}
</div>

<form id="theForm" method="post" action="/settings">
<table class="settingsTable">
  <tr>
    <td rowspan="2" class="settingsButton"><button type="button" onClick="clickConfirm('reload_btn', 'Run', 'Confirm you want to RELOAD today\'s data?');"> <b>Reload</b> today's data</button></td>
    <td class="settingsTitle">Reload log folder</td>
  </tr>
  <tr>
    <td>Reloads the folder you indicated on startup.
      <br/>
      <br/>
    </td>
  </tr>

  <tr>
    <td rowspan="2" class="settingsButton"><button type="button" onClick="clickConfirm('delete_today_btn', 'Run', 'Confirm you want to DELETE today\'s data?');"> <b>Delete</b> today's data</button></td>
    <td class="settingsTitle">Delete today's data</td>
  </tr>
  <tr>
    <td>Delete data loaded and tagged with today's date (not everything is, but matches and match history are)
      <br/>
      <br/>
    </td>
  </tr>


  <tr>
    <td rowspan="2" class="settingsButton"><button type="button" onClick="clickConfirm('reload_tiles_btn', 'Run', 'Confirm you want to RELOAD tiles for the decks without one?');"> <b>Reload tiles</b> for decks</button></td>
    <td class="settingsTitle">Reload tiles from Scryfall API for decks that have the generic one.</td>
  </tr>
  <tr>
    <td>Reload tiles from Scryfall API for decks that have the generic one. Sometimes import might fail.
      <br/>
      <br/>
    </td>
  </tr>

</table>
</form>


<script type="text/javascript">
  //Adds a confirmation popup before submitting the form
function clickConfirm(pname, pvalue, pmessage="Sure ?") {
  if (confirm(pmessage)){
    var f = document.getElementById('theForm');

    var hiddenField = document.createElement('input');
    hiddenField.type = 'hidden';
    hiddenField.name = pname;
    hiddenField.value = pvalue;

    f.appendChild(hiddenField);
    f.submit();
  }

}

</script>

</body>